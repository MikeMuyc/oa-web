(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4f571412"],{"47bb":function(t,e,a){"use strict";a("b73f")},8444:function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"table_view"},[a("div",{staticClass:"tool_bar"},[a("Select",{staticStyle:{width:"80px","margin-right":"10px"},model:{value:t.key,callback:function(e){t.key=e},expression:"key"}},t._l(t.searchType,(function(e){return a("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])})),1),a("Input",{staticStyle:{width:"200px","margin-right":"10px"},attrs:{placeholder:"输入查询内容"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.loadData(e)}},model:{value:t.searchName,callback:function(e){t.searchName=e},expression:"searchName"}}),a("Button",{attrs:{type:"primary"},on:{click:t.loadData}},[t._v("查询")]),a("div",{staticClass:"buttons"},[a("Button",{attrs:{type:"primary"},on:{click:t.addRole}},[t._v("新建角色")])],1)],1),a("div",{ref:"table_list",staticClass:"table_list"},[a("Table",{attrs:{height:t.tableHeight,loading:t.loading,columns:t.columns,data:t.dataList,size:"small",stripe:""}})],1),a("Modal",{attrs:{title:"新建角色"},on:{"on-ok":t.saveData,"on-cancel":function(e){t.modal=!1}},model:{value:t.modal,callback:function(e){t.modal=e},expression:"modal"}},[a("Form",{attrs:{model:t.roleItem,"label-width":80}},[a("FormItem",{attrs:{label:"*角色标识"}},[a("Input",{attrs:{type:"text"},model:{value:t.roleItem.role,callback:function(e){t.$set(t.roleItem,"role",e)},expression:"roleItem.role"}})],1),a("FormItem",{attrs:{label:"*角色名称"}},[a("Input",{attrs:{type:"text"},model:{value:t.roleItem.name,callback:function(e){t.$set(t.roleItem,"name",e)},expression:"roleItem.name"}})],1),a("FormItem",{attrs:{label:"父节点"}},[a("Select",{attrs:{multiple:""},model:{value:t.roleItem.parents,callback:function(e){t.$set(t.roleItem,"parents",e)},expression:"roleItem.parents"}},t._l(t.roleList,(function(t){return a("Option",{key:t.role,attrs:{value:t.role,label:t.name}})})),1)],1),a("FormItem",{attrs:{label:"备注"}},[a("Input",{attrs:{type:"text"},model:{value:t.roleItem.des,callback:function(e){t.$set(t.roleItem,"des",e)},expression:"roleItem.des"}})],1)],1)],1)],1)},l=[],n=(a("4160"),a("159b"),a("e069")),r={components:{Select:n["Select"],Option:n["Option"],Form:n["Form"],FormItem:n["FormItem"],Input:n["Input"],Modal:n["Modal"],Table:n["Table"],Button:n["Button"]},data:function(){var t=this;return{modal:!1,loading:!1,tableHeight:document.documentElement.clientHeight-120,key:"name",searchName:"",searchType:[{label:"角色名",value:"name"}],roleList:[],columns:[{title:"角色标识",key:"role"},{title:"角色名称",key:"name"},{title:"父节点",key:"",render:function(t,e){var a=[];return e.row.parents.forEach((function(e){a.push(t("Tag",{props:{type:"border",color:"primary"}},e))})),t("div",a)}},{title:"备注",key:"des"},{title:"创建时间",key:"",render:function(e,a){return e("div",a.row.createtimestamp?t.$utils.dateFormat(new Date(a.row.createtimestamp),"yyyy-MM-dd HH:mm:ss"):"")}},{title:"操作     ",key:"",align:"right",render:function(e,a){return e("div",[e("Button",{props:{type:"text",size:"small"},style:{marginRight:"5px",color:"#2372fe"},on:{click:function(){t.editUser(a.row.role)}}},"管理"),e("span",{style:{marginRight:"5px",color:"#ccc"}},"|"),e("Button",{props:{type:"text",size:"small"},style:{color:"#e93820"},on:{click:function(){t.deleteUser(a.row.role)}}},"删除")])}}],dataList:[],roleItem:{role:"",name:"",des:"",parents:[]}}},created:function(){this.loadData(),this.getRoleList()},methods:{loadData:function(){var t=this;this.loading=!0,this.$http.get("rest/authox/roles/like?key="+this.key+"&value="+this.searchName).then((function(e){t.loading=!1,t.dataList=e.data})).catch((function(e){t.loading=!1,console.log(e.data)}))},getRoleList:function(){var t=this;this.$http.get("rest/authox/roles").then((function(e){t.roleList=e.data})).catch((function(t){console.log(t.data)}))},addRole:function(){this.roleItem={role:"",name:"",des:"",parents:[]},this.modal=!0},editUser:function(t){this.$router.push({path:"/main/authox/role/roleEdit",query:{id:t}})},saveData:function(){var t=this;this.$http.post("/rest/authox/roles",this.roleItem).then((function(e){t.modal=!1,t.loadData(),t.$Message.success("添加成功！")})).catch((function(e){t.$Message.error("添加失败！"),console.log(e.data)}))},deleteUser:function(t){var e=this;this.$Modal.confirm({title:"确认删除该用户？",onOk:function(){e.$http.delete("/rest/authox/roles/"+t).then((function(t){e.$Message.success("删除成功！"),e.loadData()})).catch((function(t){e.$Message.error("删除失败！"),console.log(t.data)}))}})}}},s=r,i=(a("47bb"),a("2877")),c=Object(i["a"])(s,o,l,!1,null,"4cc912fe",null);e["default"]=c.exports},b73f:function(t,e,a){}}]);
//# sourceMappingURL=chunk-4f571412.156f4e8d.js.map