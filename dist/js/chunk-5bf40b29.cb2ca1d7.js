(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5bf40b29"],{4486:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"table_view"},[a("div",{staticClass:"tool_bar"},[a("Select",{staticStyle:{width:"80px","margin-right":"10px"},model:{value:t.key,callback:function(e){t.key=e},expression:"key"}},t._l(t.searchType,(function(e){return a("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])})),1),a("Input",{staticStyle:{width:"200px","margin-right":"10px"},attrs:{placeholder:"输入查询内容"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.loadData(e)}},model:{value:t.searchName,callback:function(e){t.searchName=e},expression:"searchName"}}),a("Button",{attrs:{type:"primary"},on:{click:t.loadData}},[t._v("查询")]),a("div",{staticClass:"buttons"},[a("Button",{attrs:{type:"primary"},on:{click:t.addUser}},[t._v("新建用户")])],1)],1),a("div",{ref:"table_list",staticClass:"table_list"},[a("Table",{attrs:{height:t.tableHeight,loading:t.loading,columns:t.columns,data:t.dataList,size:"small",stripe:""}})],1),a("div",{staticClass:"pages"},[a("Page",{attrs:{total:t.pages.total,"page-size":t.pages.pageSize,current:t.pages.current,"show-total":""},on:{"on-change":t.pageChange}})],1),a("Modal",{attrs:{title:"新建用户"},on:{"on-ok":t.saveData,"on-cancel":function(e){t.modal=!1}},model:{value:t.modal,callback:function(e){t.modal=e},expression:"modal"}},[a("Form",{attrs:{model:t.userItem,"label-width":60}},[a("FormItem",{attrs:{label:"*账号"}},[a("Input",{attrs:{type:"text"},model:{value:t.userItem.account,callback:function(e){t.$set(t.userItem,"account",e)},expression:"userItem.account"}})],1),a("FormItem",{attrs:{label:"*用户名"}},[a("Input",{attrs:{type:"text"},model:{value:t.userItem.displayName,callback:function(e){t.$set(t.userItem,"displayName",e)},expression:"userItem.displayName"}})],1),a("FormItem",{attrs:{label:"备注"}},[a("Input",{attrs:{type:"text"},model:{value:t.userItem.description,callback:function(e){t.$set(t.userItem,"description",e)},expression:"userItem.description"}})],1),a("FormItem",{attrs:{label:"*密码"}},[a("Input",{attrs:{type:"password"},model:{value:t.userItem.password,callback:function(e){t.$set(t.userItem,"password",e)},expression:"userItem.password"}})],1)],1)],1)],1)},o=[],n=(a("4160"),a("b0c0"),a("159b"),a("e069")),r={components:{Select:n["Select"],Option:n["Option"],Form:n["Form"],FormItem:n["FormItem"],Input:n["Input"],Modal:n["Modal"],Table:n["Table"],Button:n["Button"],Page:n["Page"]},data:function(){var t=this;return{modal:!1,loading:!1,tableHeight:document.documentElement.clientHeight-170,key:"account",searchName:"",searchType:[{label:"用户名",value:"displayName"},{label:"账号",value:"account"}],columns:[{title:"账号",key:"account"},{title:"用户名",key:"displayName"},{title:"角色",key:"",render:function(t,e){var a=[];return e.row.roles.forEach((function(e){a.push(t("Tag",{props:{type:"border",color:"primary"}},e.name))})),t("div",a)}},{title:"备注",key:"description"},{title:"创建时间",key:"",render:function(e,a){return e("div",a.row.createTimestamp?t.$utils.dateFormat(new Date(a.row.createTimestamp),"yyyy-MM-dd HH:mm:ss"):"")}},{title:"操作",key:"",align:"right",render:function(e,a){return e("div",[e("Button",{props:{type:"text",size:"small"},style:{marginRight:"5px",color:"#2372fe"},on:{click:function(){t.editUser(a.row.uid)}}},"管理"),e("span",{style:{marginRight:"5px",color:"#ccc"}},"|"),e("Button",{props:{type:"text",size:"small"},style:{color:"#e93820"},on:{click:function(){t.deleteUser(a.row.uid)}}},"删除")])}}],dataList:[],userItem:{account:"",displayName:"",description:"",password:""},pages:{pageSize:parseInt((document.documentElement.clientHeight-202)/40),current:1,total:0}}},created:function(){this.loadData()},methods:{loadData:function(){var t=this;this.loading=!0,this.$http.get("/rest/authox/usersByPage/like?"+this.key+"="+this.searchName+"&pageNum="+(this.pages.current-1)+"&pageSize="+this.pages.pageSize).then((function(e){t.loading=!1,t.dataList=e.data.pageItems,t.pages.total=e.data.rowCount})).catch((function(e){t.loading=!1,console.log(e)}))},pageChange:function(t){this.pages.current=t,this.loadData()},addUser:function(){this.userItem={account:"",displayName:"",description:"",password:""},this.modal=!0},editUser:function(t){this.$router.push({path:"/main/authox/user/userEdit",query:{id:t}})},saveData:function(){var t=this;this.$http.post("/rest/authox/users",this.userItem).then((function(e){t.modal=!1,t.loadData(),t.$Message.success("添加成功！")})).catch((function(e){t.$Message.error("添加失败！"),console.log(e.data)}))},deleteUser:function(t){var e=this;this.$Modal.confirm({title:"确认删除该用户？",onOk:function(){e.$http.delete("/rest/authox/users/"+t).then((function(t){e.$Message.success("删除成功！"),e.loadData()})).catch((function(t){e.$Message.error("删除失败！"),console.log(t.data)}))}})}}},i=r,l=(a("6ce5"),a("2877")),c=Object(l["a"])(i,s,o,!1,null,"ea04b7d4",null);e["default"]=c.exports},"6ce5":function(t,e,a){"use strict";a("7420")},7420:function(t,e,a){}}]);
//# sourceMappingURL=chunk-5bf40b29.cb2ca1d7.js.map